{% extends "base.html" %}

{% load static %}

{% block title %}
    {% if user.user_type == 'staff' %}
        Staff Dashboard - NeatClean
    {% else %}
        Book Cleaning - NeatClean
    {% endif %}
{% endblock %}

{% block content %}
<div class="container">
    <aside class="sidebar">
        {% if user.user_type == 'staff' %}
            <h3>Cleaning Requests</h3>
            <div id="pending-requests">
                Loading requests...
            </div>
        {% else %}
            <h3>Premium</h3>
            <p>Upgrade to premium for additional benefits.</p>
            <h3>More Info</h3>
            <p>Learn more about our services.</p>
        {% endif %}
    </aside>

    {% if user.user_type == 'staff' %}
        <div class="main-content">
            <h2>Set Your Availability</h2>
            <div id="staff-calendar">
                <h3>Select Working Days</h3>
                <div id="calendar-container">
                    <input type="text" id="availability-date" class="flatpickr" placeholder="Select dates...">
                </div>
                <div id="time-slots">
                    <h4>Working Hours</h4>
                    <div class="time-range">
                        <label for="start-time">Start Time:</label>
                        <input type="text" id="start-time" class="flatpickr-time" placeholder="Select start time...">
                        <label for="end-time">End Time:</label>
                        <input type="text" id="end-time" class="flatpickr-time" placeholder="Select end time...">
                    </div>
                    <button type="button" class="btn btn-primary" id="save-availability">
                        Save Availability
                    </button>
                </div>
                <div id="upcoming-bookings">
                    <h3>Upcoming Bookings</h3>
                    <div id="bookings-list">
                        Loading bookings...
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

    {% if not user.user_type == 'staff' %}
        <div class="main-content">
            <h2>Book a Cleaning Service</h2>
            <p>Select a date and time for your cleaning service.</p>
            <form id="availability-form">
                <div class="calendar-time-container">
                    <div id="calendar-container">
                        <input type="text"
                               id="date-picker"
                               name="date-picker"
                               class="flatpickr-input"
                               placeholder="Select date and time..."
                               data-input>
                    </div>
                </div>
                <button type="button"
                        id="check-availability-button"
                        class="btn btn-primary"
                        style="display: none;">
                    Check Availability
                </button>
            </form>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
    {% if user.user_type == 'staff' %}
        <script src="{% static 'staff.js' %}" defer></script>
    {% else %}
        <script src="{% static 'calendar.js' %}" defer></script>
    {% endif %}
{% endblock %}